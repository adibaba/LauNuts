<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <title>LauNuts: A Knowledge Graph to identify and compare geographic regions in the European Union</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&family=Roboto+Mono&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="prism.css">
  <style>
   * {
    font-family: 'Roboto Condensed', sans-serif;
    line-height: 1.3;
   }
   pre {
    font-family: 'Roboto Mono', monospace;
    font-size: 0.8em;
    overflow: auto;
    background: #f5f5f5;
    padding: 7px 12px;
    width: 95%;
   }
   h2 {
    margin-top: 30px;
   }
   h3 {
    margin-top: 10px;
    margin-bottom: 2px;
   }
   table, tr, td {
    border: none
   }
   td {
    vertical-align: top;
   }
   img.logo {
    display: block;
    margin: auto;
   }
   img.normal {
    display: block;
    margin: auto;
    width: 500px;
    max-width: 100%;
   }
   select {
    background: rgb(39, 40, 34);
    width: 98.5%;
   }
   option {
    color: rgb(248, 248, 242);
    font-size: 1.2em;
    padding: 5px 10px;
   }
   option:checked {
    background: rgb(99, 99, 99);
   }
   input {
    background: rgb(39, 40, 34);
    color: rgb(248, 248, 242);
    width: 95.5%;
    font-family: 'Roboto Mono', monospace;
    font-size: 1.05em;
    padding: 5px 10px;
   }
   #content {
    margin: auto;
    max-width: 800px;
   }
  </style>
 </head>
 <body>
  <div id="content">
   <a href="https://w3id.org/launuts"><img src="https://img.shields.io/badge/Website-w3id.org/launuts-a9d4e8" alt="website"></a>
   <a target="_blank" href="https://github.com/adibaba/LauNuts/issues"><img src="https://img.shields.io/badge/Issue%20tracker-GitHub-d1e28a" alt="issues"></a>
   
   <br><img src="LauNuts-200px.png" alt="LauNuts" class="logo">
   
   <h2>LauNuts</h2>
   LauNuts is a RDF Knowledge Graph consisting of:
   <ul>
    <li>Local Administrative Units (LAU) and</li>
    <li>Nomenclature of Territorial Units for Statistics (NUTS)</li>
   </ul>
   It is a hierarchical system where geographical areas are subdivided according to their population sizes.
   
   <h2>Download</h2>
   The current version <b>LauNuts2021b</b> can be downloaded here: <a href="https://hobbitdata.informatik.uni-leipzig.de/LauNuts/LauNuts2021b.nt.zip">LauNuts2021b.nt.zip</a>.
   It contains the NUTS schemes 2021 and 2016 as well as LAU data from 2021 and 2020.
   The NUTS 2021 scheme consists of data for the countries 
   AL, AT, BE, BG, CH, CY, CZ, DE, DK, EE, EL, ES, FI, FR, HR, HU, IE, IS, IT, LI, LT, LU, LV, ME, MK, MT, NL, NO, PL, PT, RO, RS, SE, SI, SK, TR and UK.
   The knowled graph contains 1,181,549 triples.
   
   <h2>Resources</h2>
   <table>
    <tr>
     <td style="padding-right:25px">Article:</td>
     <td>
      LauNuts: A Knowledge Graph to identify and compare geographic regions in the European Union
      <br>(accepted at ISWC 2023 - The 22nd International Semantic Web Conference,
      <a target="_blank" href="https://scholar.google.com/scholar?q=LauNuts%3A+A+Knowledge+Graph+to+identify+and+compare+geographic+regions+in+the+European+Union">Google Scholar</a>,
      <a target="_blank" href="https://papers.dice-research.org/2023/ESWC_LauNuts/Wilke-2023-LauNuts-KnowledgeGraph-EuropeanUnion-public.pdf">preprint</a>, <a target="_blank" href="https://papers.dice-research.org/2023/ESWC_LauNuts/LauNuts-slides-public.pdf">slides</a>)
      </td>
    </tr>
    <tr>
     <td>Data:</td>
     <td><a target="_blank" href="https://hobbitdata.informatik.uni-leipzig.de/LauNuts/">hobbitdata.informatik.uni-leipzig.de/LauNuts/</a></td>
    </tr>
    <tr>
     <td>Software:</td>
     <td><a target="_blank" href="https://github.com/dice-group/launuts">github.com/dice-group/launuts</a></td>
    </tr>
    <tr>
     <td>SPARQL:</td>
     <td><a target="_blank" href="https://launuts.data.dice-research.org/sparql">launuts.data.dice-research.org/sparql</a></td>
    </tr>
    <tr>
     <td>Website:</td>
     <td><a href="https://w3id.org/launuts">w3id.org/launuts</a></td>
    </tr>
   </table>
   
   <h2>Insights</h2>
   
   <p>The LauNuts scheme contains the following concepts:</p>
   <img src="schema-extension.svg" alt="LauNuts schema" class="normal">

   <h2 id="sparql">SPARQL examples</h2>
   <!-- HTML entity encoder/decoder: https://mothereff.in/html-entities -->

   To execute the SPARQL queries, you can use a public SPARQL endpoint.
   Alternatively, <a target="_blank" href="https://archive.apache.org/dist/jena/binaries/">download the Fuseki triplestore</a> (e.g. apache-jena-fuseki-4.7.0.zip).
   After running the included launch script, you can import the LauNuts knowledge graph on <a target="_blank" href="http://127.0.0.1:3030">http://127.0.0.1:3030</a>.

   <form>
    <h3>Query type</h3>
    <select size=6 id="method">
     <option value="nuts0" onclick="formHandler()" selected>Get NUTS countries (level 0)</option>
     <option value="nuts" onclick="formHandler()">Get NUTS data (level 1-3)</option>
     <option value="lau" onclick="formHandler()">Get LAU data</option>
     <option value="nutsschemes" onclick="formHandler()">Get NUTS schemes</option>
     <option value="lauschemes" onclick="formHandler()">Get LAU schemes</option>
     <option value="search" onclick="formHandler()">Search for a region name</option>
    </select>
    
    <h3 id="hnutsscheme" style="display:none">NUTS scheme</h3>
    <select size=2 id="nutsscheme">
     <option value="2021" onclick="formHandler()" selected>2021</option>
     <option value="2016" onclick="formHandler()">2016</option>
    </select>
    
    <h3 id="hlauscheme" style="display:none">LAU scheme</h3>
    <select size=2 id="lauscheme" style="display:none">
     <option value="2021" onclick="formHandler()" selected>2021</option>
     <option value="2020" onclick="formHandler()">2020</option>
    </select>
    
    <h3 id="hsearch" style="display:none">Region name</h3>
    <input type="text" value="frankfurt" id="search" onkeyup="formHandler()" oninput="formHandler()" style="display:none">
    
    <h3 id="hnuts0" style="display:none">NUTS 1 code</h3>
    <input type="text" value="DE"    id="nuts0" maxlength="2" onkeyup="formHandler()" oninput="formHandler()" style="display:none">
    
    <h3 id="hnuts" style="display:none">NUTS 3 code</h3>
    <input type="text" value="DEA47" id="nuts"  maxlength="5" onkeyup="formHandler()" oninput="formHandler()" style="display:none">
   </form>
   
   <h3 style="margin-bottom:0px">Query</h3>
   <pre id="sparqlpre"><code class="language-sparql" id="sparqlcode"></code></pre>
   <a href="" target="_blank" id="endpointExec">Execute </a> or
   <a href="" target="_blank" id="endpointEdit">edit</a> on public SPARQL endpoint

   <h2>Notes</h2>
    If you use the LauNuts Knowledge Graph, feel free to add you work to the <a target="_blank" href="https://github.com/adibaba/LauNuts/wiki/Usage">Usage wiki page</a>.
    There are also open possibilities for extending the KG, which could become part of student works (see <a target="_blank" href="https://github.com/adibaba/LauNuts/labels/enhancement">Issues</a>).

   <h2>Acknowledgements</h2>
    This work has been supported by the German Federal Ministry of Education and Research (BMBF) within the project <a target="_blank" href="https://eml4u.github.io/">EML4U</a> under the grant no 01IS19080B
    and 
    by the German Federal Ministry of Transport and Digital Infrastructure (BMVI) within the project <a target="_blank" href="https://arxiv.org/pdf/2105.03161.pdf">OPAL</a> under the grant no 19F2028A. 
   
   <h2>Credits</h2>
    LauNuts is licensed under a Creative Commons Attribution 4.0 International (CC BY 4.0) license by the
    <a target="_blank" href="https://dice-research.org/">Data Science Group (DICE)</a> at <a target="_blank" href="https://www.uni-paderborn.de/">Paderborn University</a>, Adrian Wilke.
    The source data is licensed under a Creative Commons Attribution 4.0 International (CC BY 4.0) license by the European Union, 1995-2023, see https://ec.europa.eu/info/legal-notice_en.
  </div>

  <script src="prism.js"></script>
  <script>
/* https://stackoverflow.com/a/7394787 */
function decodeHtml(html) {
 var txt = document.createElement("textarea");
 txt.innerHTML = html;
 return txt.value;
}

/* https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent#encoding_for_content-disposition_and_link_headers */
function encodeRFC5987ValueChars(str) {
 return (
  encodeURIComponent(str)
   .replace(/['()*]/g, (c) => `%${c.charCodeAt(0).toString(16).toUpperCase()}`)
   .replace(/%(7C|60|5E)/g, (str, hex) =>
   String.fromCharCode(parseInt(hex, 16))
  )
 );
}

function formHandler() {
var nutsscheme = document.getElementById('nutsscheme').value;
var lauscheme = document.getElementById('lauscheme').value;
var search = document.getElementById('search').value;
var nuts0 = document.getElementById('nuts0').value.toUpperCase();
var nuts = document.getElementById('nuts').value.toUpperCase();

var sparqlnuts0='PREFIX skos: &#x3C;http://www.w3.org/2004/02/skos/core#&#x3E;\n' +
'SELECT ?uniqueNuts ?nuts ?code ?label ?related WHERE {\n' +
'  ?uniqueNuts skos:inScheme &#x3C;https://w3id.org/launuts/nuts/scheme#' + nutsscheme + '&#x3E; .\n' +
'  ?nuts &#x3C;http://data.europa.eu/nuts/level&#x3E; &#x3C;https://w3id.org/launuts/level/0&#x3E; .\n' +
'  ?nuts skos:notation ?code .\n' +
'  ?uniqueNuts skos:hasTopConcept ?nuts .\n' +
'  ?uniqueNuts skos:prefLabel ?label .\n' +
'  OPTIONAL { ?uniqueNuts skos:related ?related } .\n' +
'}\n' +
'ORDER BY ASC(?code)';

var sparqlnuts='PREFIX skos: &#x3C;http://www.w3.org/2004/02/skos/core#&#x3E;\n' +
'SELECT ?uniqueNuts ?nuts ?code ?label ?related WHERE {\n' +
'  ?uniqueNuts skos:inScheme &#x3C;https://w3id.org/launuts/nuts/scheme#' + nutsscheme + '&#x3E; .\n' +
'  ?uniqueNutsBroader skos:hasTopConcept &#x3C;https://w3id.org/launuts/nuts/code#' + nuts0 + '&#x3E; .\n' +
'  ?uniqueNuts skos:broader ?uniqueNutsBroader .\n' +
'  ?uniqueNuts skos:hasTopConcept ?nuts .\n' +
'  ?nuts skos:notation ?code .\n' +
'  ?uniqueNuts skos:prefLabel ?label .\n' +
'  OPTIONAL { ?uniqueNuts skos:related ?related } .\n' +
'}\n' +
'ORDER BY ASC(?code)';

var lautonuts = '2021';
if(lauscheme == '2020') {
 lautonuts = '2016';
}
var sparqllau='PREFIX skos: &#x3C;http://www.w3.org/2004/02/skos/core#&#x3E;\n' +
'PREFIX dbo: &#x3C;http://dbpedia.org/ontology/&#x3E;\n' +
'SELECT (?uniqueLau as ?lau) ?code ?name ?national ?area ?population WHERE {\n' +
'  ?uniqueLau skos:inScheme &#x3C;https://w3id.org/launuts/lau/' + lauscheme + '&#x3E; .\n' +
'  ?uniqueLau skos:broader &#x3C;https://w3id.org/launuts/nuts/' + lautonuts + '#' + nuts + '&#x3E; .\n' +
'  ?uniqueLau skos:hasTopConcept ?lauBroader .\n' +
'  ?lauBroader skos:notation ?code .\n' +
'  OPTIONAL { ?uniqueLau skos:prefLabel ?name } .\n' +
'  OPTIONAL { ?uniqueLau skos:altLabel ?national } .\n' +
'  OPTIONAL { ?uniqueLau dbo:area ?area } .\n' +
'  OPTIONAL { ?uniqueLau dbo:populationTotal ?population } .\n' +
'}\n' +
'ORDER BY ASC(?code)';

var sparqlnutsschemes='SELECT ?scheme ?eurostat ?date WHERE {\n' +
'  ?scheme a &#x3C;https://w3id.org/launuts/nutsScheme&#x3E; .\n' +
'  ?scheme &#x3C;http://www.w3.org/2002/07/owl#sameAs&#x3E; ?eurostat .\n' +
'  ?scheme &#x3C;http://purl.org/dc/terms/issued&#x3E; ?date .\n' +
'}\n' +
'ORDER BY DESC(?date)';

var sparqllauschemes='SELECT ?lauScheme ?nutsScheme ?date WHERE {\n' +
'  ?lauScheme a &#x3C;https://w3id.org/launuts/lauScheme&#x3E; .\n' +
'  ?lauScheme &#x3C;http://www.w3.org/2004/02/skos/core#related&#x3E; ?nutsScheme .\n' +
'  ?lauScheme &#x3C;http://purl.org/dc/terms/issued&#x3E; ?date .\n' +
'}\n' +
'ORDER BY DESC(?date)';

var sparqlsearch='SELECT ?uri ?label WHERE {\n' +
'  ?uri &#x3C;http://www.w3.org/2004/02/skos/core#prefLabel&#x3E; ?label\n' +
'  FILTER(REGEX(?label, &#x22;' + search + '&#x22;, &#x22;i&#x22;))\n' +
'}';

var method = document.getElementById('method').value;
document.getElementById("nutsscheme").style.display = "none";
document.getElementById("hnutsscheme").style.display = "none";
document.getElementById("lauscheme").style.display = "none";
document.getElementById("hlauscheme").style.display = "none";
document.getElementById("search").style.display = "none";
document.getElementById("hsearch").style.display = "none";
document.getElementById("nuts0").style.display = "none";
document.getElementById("hnuts0").style.display = "none";
document.getElementById("nuts").style.display = "none";
document.getElementById("hnuts").style.display = "none";

if(method == 'nuts0') {
 document.getElementById("nutsscheme").style.display = "block";
 document.getElementById("hnutsscheme").style.display = "block";
 sparql = sparqlnuts0;
} else if(method == 'nuts') {
 document.getElementById("nutsscheme").style.display = "block";
 document.getElementById("hnutsscheme").style.display = "block";
 document.getElementById("nuts0").style.display = "block";
 document.getElementById("hnuts0").style.display = "block";
 sparql = sparqlnuts;
} else if(method == 'lau') {
 document.getElementById("lauscheme").style.display = "block";
 document.getElementById("hlauscheme").style.display = "block";
 document.getElementById("nuts").style.display = "block";
 document.getElementById("hnuts").style.display = "block";
 sparql = sparqllau;
} else if(method == 'nutsschemes') {
 sparql = sparqlnutsschemes;
} else if(method == 'lauschemes') {
 sparql = sparqllauschemes;
} else {
 document.getElementById("search").style.display = "block";
 document.getElementById("hsearch").style.display = "block";
 sparql = sparqlsearch;
}
document.getElementById('sparqlcode').innerHTML = sparql;
sparqlparam = decodeHtml(sparql)
Prism.highlightAll();
sparqledit = 'https://launuts.data.dice-research.org/sparql?qtxt=' + encodeRFC5987ValueChars(sparqlparam)
sparqlexec = 'https://launuts.data.dice-research.org/sparql?query=' + encodeRFC5987ValueChars(sparqlparam)
document.getElementById("endpointEdit").href = sparqledit;
document.getElementById("endpointExec").href = sparqlexec;
}

window.onload = function () {
 formHandler();
}
  </script>
 </body>
</html>
